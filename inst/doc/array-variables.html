<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Array Variables</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Array Variables</h1>



<p><a href="variables.html">Previous: variables</a></p>
<p>Crunch supports more types of variables than many of the data formats
from which you can create datasets. Plain-text .csv files, for example,
can’t express that some columns are actually indicator matrices of
multiple selections (Multiple Response Variables). Most SPSS .sav files
do not indicate Categorical Arrays (otherwise known as “grids”) as being
part of a group—they are simply several categorical variables. The same
is true for an R <code>data.frame</code>.</p>
<p>You can use <code>crunch</code> to “bind” categorical variables into
Multiple Response and Categorical Array variables.</p>
<div id="creating-an-array" class="section level2">
<h2>Creating an array</h2>
<p>One of the reasons to use R with Crunch is to leverage the power of
scripting for tasks that would be repetitive in a GUI. Many crunch
functions operating on Crunch datasets have an optional
<code>pattern</code> argument that lets you use regular expressions for
these “bulk” operations.</p>
<p>In our sample <em>Economist</em> dataset, we have set of variables
prefixed with “imiss”:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;^imiss_&quot;</span>, <span class="fu">names</span>(ds), <span class="at">value=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;imiss_b&quot; &quot;imiss_c&quot; &quot;imiss_d&quot; &quot;imiss_f&quot; &quot;imiss_g&quot; &quot;imiss_h&quot; &quot;imiss_j&quot; &quot;imiss_m&quot; &quot;imiss_p&quot; &quot;imiss_q&quot; &quot;imiss_r&quot;
## [12] &quot;imiss_s&quot; &quot;imiss_t&quot;</code></pre>
<p>These correspond to a survey grid question about how important
respondents view a set of issues. Examining one of them, we see</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>ds<span class="sc">$</span>imiss_b</span></code></pre></div>
<pre><code>## imiss_b (categorical)
## 
##                    Count
## Very Important       196
## Somewhat Important    44
## Not very Important     8
## Unimportant            1</code></pre>
<p>All of these “imiss” categorical variables have the same structure.
We can combine them into a categorical array variable with
<code>makeArray</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>ds<span class="sc">$</span>imiss <span class="ot">&lt;-</span> <span class="fu">makeArray</span>(ds[<span class="fu">grep</span>(<span class="st">&quot;^imiss_&quot;</span>, <span class="fu">names</span>(ds))], <span class="at">name=</span><span class="st">&quot;Issue importance&quot;</span>)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>ds<span class="sc">$</span>imiss</span></code></pre></div>
<pre><code>## Issue importance (categorical_array)
## Subvariables:
##   $`imiss_b`
##   $`imiss_c`
##   $`imiss_d`
##   $`imiss_f`
##   $`imiss_g`
##   $`imiss_h`
##   $`imiss_j`
##   $`imiss_m`
##   $`imiss_p`
##   $`imiss_q`
##   $`imiss_r`
##   $`imiss_s`
##   $`imiss_t`</code></pre>
<p>The set of “important issue” variables have gone from thirteen
separate categorical variable cards to just one, where the subvariables
are shown as rows, and the common categories across all of them are
shown as columns.</p>
<p>In our example dataset, the categorical variables
<code>imiss_*</code> are now not visible in the dataset directly, but we
can access them as “subvariables” of the array we just created.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">subvariables</span>(ds<span class="sc">$</span>imiss)</span></code></pre></div>
<pre><code>## Subvariables:
##   $`imiss_b`
##   $`imiss_c`
##   $`imiss_d`
##   $`imiss_f`
##   $`imiss_g`
##   $`imiss_h`
##   $`imiss_j`
##   $`imiss_m`
##   $`imiss_p`
##   $`imiss_q`
##   $`imiss_r`
##   $`imiss_s`
##   $`imiss_t`</code></pre>
<p>We can also step into the subvariables and access the underlying
categorical variables:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>ds<span class="sc">$</span>imiss<span class="sc">$</span>imiss_b</span></code></pre></div>
<pre><code>## imiss_b (categorical)
## 
##                    Count
## Very Important       196
## Somewhat Important    44
## Not very Important     8
## Unimportant            1</code></pre>
</div>
<div id="manipulating-subvariables" class="section level2">
<h2>Manipulating subvariables</h2>
<p>The names <code>imiss_b</code> through <code>imiss_t</code> are
unsatisfying from a human-readability perspective: you can’t tell which
political issues correspond to the variables. Unfortunately, we didn’t
have additional metadata on these survey questions in the
<code>data.frame</code> we imported initially. However, we can rectify
this.</p>
<p>Subvariables have methods similar to those for <a href="variables.html">categories</a>. They have a names attribute that
we can get:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">subvariables</span>(ds<span class="sc">$</span>imiss))</span></code></pre></div>
<pre><code>##  [1] &quot;imiss_b&quot; &quot;imiss_c&quot; &quot;imiss_d&quot; &quot;imiss_f&quot; &quot;imiss_g&quot; &quot;imiss_h&quot; &quot;imiss_j&quot; &quot;imiss_m&quot; &quot;imiss_p&quot; &quot;imiss_q&quot; &quot;imiss_r&quot;
## [12] &quot;imiss_s&quot; &quot;imiss_t&quot;</code></pre>
<p>We can set it, too:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">subvariables</span>(ds<span class="sc">$</span>imiss)) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;The economy&quot;</span>, <span class="st">&quot;Immigration&quot;</span>,</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>    <span class="st">&quot;The environment&quot;</span>, <span class="st">&quot;Terrorism&quot;</span>, <span class="st">&quot;Gay rights&quot;</span>, <span class="st">&quot;Education&quot;</span>,</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>    <span class="st">&quot;Health care&quot;</span>, <span class="st">&quot;Social security&quot;</span>, <span class="st">&quot;The budget deficit&quot;</span>,</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>    <span class="st">&quot;The war in Afghanistan&quot;</span>, <span class="st">&quot;Taxes&quot;</span>, <span class="st">&quot;Medicare&quot;</span>, <span class="st">&quot;Abortion&quot;</span>)</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="fu">subvariables</span>(ds<span class="sc">$</span>imiss)</span></code></pre></div>
<pre><code>## Subvariables:
##   $`The economy`
##   $`Immigration`
##   $`The environment`
##   $`Terrorism`
##   $`Gay rights`
##   $`Education`
##   $`Health care`
##   $`Social security`
##   $`The budget deficit`
##   $`The war in Afghanistan`
##   $`Taxes`
##   $`Medicare`
##   $`Abortion`</code></pre>
<p>Another useful thing we can do with array subvariables is reorder
them. Let’s alphabetize the subvariables:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>sorting <span class="ot">&lt;-</span> <span class="fu">order</span>(<span class="fu">names</span>(<span class="fu">subvariables</span>(ds<span class="sc">$</span>imiss)))</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">subvariables</span>(ds<span class="sc">$</span>imiss) <span class="ot">&lt;-</span> <span class="fu">subvariables</span>(ds<span class="sc">$</span>imiss)[sorting]</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="fu">subvariables</span>(ds<span class="sc">$</span>imiss)</span></code></pre></div>
<pre><code>## Subvariables:
##   $`Abortion`
##   $`Education`
##   $`Gay rights`
##   $`Health care`
##   $`Immigration`
##   $`Medicare`
##   $`Social security`
##   $`Taxes`
##   $`Terrorism`
##   $`The budget deficit`
##   $`The economy`
##   $`The environment`
##   $`The war in Afghanistan`</code></pre>
</div>
<div id="creating-multiple-response-variables" class="section level2">
<h2>Creating multiple response variables</h2>
<p>Just as we created a categorical array, we can create a multiple
response variable. Like categorical arrays, multiple responses contain a
set of subvariables, categorical variables with a common list of
categories. However, the subvariables in a multiple response are treated
as dichotomous indicators. We specify one or more categories that
indicate “selected” versus “not selected”. Hence, when a multiple
response appears in the web app, it looks like a single categorical
variable, each subvariable shown like a category. Unlike a categorical
variable, though, the multiple responses are not mutually exclusive, so
tabulations with them may not sum to 100 percent.</p>
<p>In the <em>Economist</em> dataset, we have another set of parallel
categorical variables, “boap”, which indicate approval of President
Obama on a range of issues.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>ds<span class="sc">$</span>boap_4</span></code></pre></div>
<pre><code>## boap_4 (categorical)
## 
##                     Count
## Somewhat approve       68
## Strongly disapprove    67
## No opinion             46
## Somewhat disapprove    43
## Strongly approve       26</code></pre>
<p>In the questionnaire that collected this data, “boap” appeared as a
grid question, just as “imiss” did. But, for illustration purposes—and
to show how you can convert between categorical array and multiple
response—let’s treat this as multiple response.</p>
<p>The function <code>makeMR</code> works like <code>makeArray</code>
but with an additional argument, “selections”, in which you specify the
category name(s) that identify which category or categories should be
the dichotomous indicator.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>ds<span class="sc">$</span>boap <span class="ot">&lt;-</span> <span class="fu">makeMR</span>(ds[<span class="fu">grep</span>(<span class="st">&quot;^boap_[0-9]+&quot;</span>, <span class="fu">names</span>(ds))],</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>    <span class="at">name=</span><span class="st">&quot;Approval of Obama on issues&quot;</span>,</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>    <span class="at">selections=</span><span class="fu">c</span>(<span class="st">&quot;Strongly approve&quot;</span>, <span class="st">&quot;Somewhat approve&quot;</span>))</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>ds<span class="sc">$</span>boap</span></code></pre></div>
<pre><code>## Approval of Obama on issues (multiple_response)
## Subvariables:
##   $`boap_2`
##   $`boap_3`
##   $`boap_4`
##   $`boap_5`
##   $`boap_6`
##   $`boap_7`
##   $`boap_8`
##   $`boap_9`
##   $`boap_10`
##   $`boap_11`
##   $`boap_12`
##   $`boap_13`
##   $`boap_14`</code></pre>
</div>
<div id="undichotomize" class="section level2">
<h2>(un)dichotomize</h2>
<p>Multiple response variables can be thought of as categorical arrays
that have extra metadata indicating which categories are “selected”.
This metadata can be manipulated, and we can thus transform categorical
arrays into multiple response and vice versa.</p>
<p>The function <code>undichotomize</code> removes the dichotomization
metadata:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>ds<span class="sc">$</span>boap <span class="ot">&lt;-</span> <span class="fu">undichotomize</span>(ds<span class="sc">$</span>boap)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>ds<span class="sc">$</span>boap</span></code></pre></div>
<pre><code>## Approval of Obama on issues (categorical_array)
## Subvariables:
##   $`boap_2`
##   $`boap_3`
##   $`boap_4`
##   $`boap_5`
##   $`boap_6`
##   $`boap_7`
##   $`boap_8`
##   $`boap_9`
##   $`boap_10`
##   $`boap_11`
##   $`boap_12`
##   $`boap_13`
##   $`boap_14`</code></pre>
<p>We can add that information with <code>dichotomize</code>. Taking our
categorical array “boap,” let’s make it into a multiple response, but
this time, let’s only include the “Strongly approve” category:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>ds<span class="sc">$</span>boap <span class="ot">&lt;-</span> <span class="fu">dichotomize</span>(ds<span class="sc">$</span>boap, <span class="st">&quot;Strongly approve&quot;</span>)</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>ds<span class="sc">$</span>boap</span></code></pre></div>
<pre><code>## Approval of Obama on issues (multiple_response)
## Subvariables:
##   $`boap_2`
##   $`boap_3`
##   $`boap_4`
##   $`boap_5`
##   $`boap_6`
##   $`boap_7`
##   $`boap_8`
##   $`boap_9`
##   $`boap_10`
##   $`boap_11`
##   $`boap_12`
##   $`boap_13`
##   $`boap_14`</code></pre>
</div>
<div id="splitting-arrays-back-into-categoricals" class="section level2">
<h2>Splitting arrays back into categoricals</h2>
<p>As noted above, when we make an array, its subvariables no longer
appear in the dataset outside of the array.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;boap&quot;</span>, <span class="fu">names</span>(ds), <span class="at">value=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] &quot;boap&quot;</code></pre>
<p>We can access the subvariables and do things with them directly via
the <code>subvariables</code> method, but the case may arise in which we
want to undo our binding of these subvariables into the array. The
function <code>unbind</code> deletes the array variable and restores the
subvariables as top-level variables.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">unbind</span>(ds<span class="sc">$</span>boap)</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>ds <span class="ot">&lt;-</span> <span class="fu">refresh</span>(ds)</span></code></pre></div>
<p>Note the use of <code>refresh</code>. Most functions that modify
objects on the server refresh their local copies in our R session
automatically; however, because <code>unbind</code> doesn’t assign back
into <code>ds</code>, the local dataset object doesn’t get updated with
the change, so we need to refresh it manually.</p>
<p>Now, if we check the names of <code>ds</code>, we see our full set of
<code>boap_*</code> former subvariables:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;boap&quot;</span>, <span class="fu">names</span>(ds), <span class="at">value=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;boap_2&quot;  &quot;boap_3&quot;  &quot;boap_4&quot;  &quot;boap_5&quot;  &quot;boap_6&quot;  &quot;boap_7&quot;  &quot;boap_8&quot;  &quot;boap_9&quot;  &quot;boap_10&quot; &quot;boap_11&quot; &quot;boap_12&quot;
## [12] &quot;boap_13&quot; &quot;boap_14&quot;</code></pre>
<p><a href="variable-order.html">Next: variable organization</a></p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
